- name: Push the function domain for the function route
  command: "/usr/bin/etcdctl set /route_discovery/{{item.0.route}}/services/{{item}}{{function}}/host '{{item}}-{{google_project_id}}/{{function}}'"
  loop: "{{ gcp_functions|subelements('regions') }}"
  
- name: Push the function port for the function route
  command: "/usr/bin/etcdctl set /route_discovery/{{item.0.route}}/services/{{item.1}}{{item.0.route}}/port '80'"
  loop: "{{ gcp_functions|subelements('regions') }}"
  
- name: Push private=false for the function route
  command: "/usr/bin/etcdctl set /route_discovery/{{item.route}}/private 'false'"
  loop: "{{ gcp_functions }}"
  
- name: Push strip=true for the function route
  command: "/usr/bin/etcdctl set /route_discovery/{{item.route}}/strip 'true'"
  loop: "{{ gcp_functions }}"
