---
- hosts: all:!localhost
  remote_user: root
  tasks:
    - name: Ensure /opt/bin exists
      raw: mkdir -p /opt/bin
    - name: Pull container
      raw: docker pull chadautry/wac-python:{wac-python.version}
    - name: Instantiate container
      raw: docker create --name copy-python chadautry/wac-python
    - name: Copy script from container instance
      raw docker cp copy-python:/opt/bin/python.sh /opt/bin
    - name: Delete container instance
      raw: docker rm copy-python
    - name: Set permissions on script
      raw: chmod 755 /opt/bin/python.sh
