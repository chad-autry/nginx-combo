# Make sure python is installed
- hosts: all:!localhost
  gather_facts: false
  become: true
  roles:
    - coreos-python
    
# Place a full etcd on the etcd hosts
- hosts: tag_etcd
  become: true
  roles:
    - { role: etcd, proxy_etcd: False }
    
# Place a proxy etcd everywhere except the etcd hosts
- hosts: all:!tag_etcd:!localhost
  become: true
  roles:
    - { role: etcd, proxy_etcd: True }
